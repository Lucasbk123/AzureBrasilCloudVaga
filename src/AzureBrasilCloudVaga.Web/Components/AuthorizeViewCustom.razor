

<AuthorizeView Roles="@Roles" Policy="@Policy">
    <Authorized>
        @ChildContent
    </Authorized>
    <NotAuthorized>
        @if (!isAuthenticated)
        {
            <RedirectToLogin />
        }
    </NotAuthorized>
</AuthorizeView>



@code {

    [Parameter] public string? Policy { get; set; }
    [Parameter] public string? Roles { get; set; }
    [Parameter] public RenderFragment? ChildContent { get; set; }

    private bool isAuthenticated;

    [CascadingParameter]
    private Task<AuthenticationState> AuthenticationStateTask { get; set; } = default!;

    protected override async Task OnParametersSetAsync()
    {
        var authState = await AuthenticationStateTask;
        isAuthenticated = authState.User.Identity?.IsAuthenticated ?? false;
    }

}
